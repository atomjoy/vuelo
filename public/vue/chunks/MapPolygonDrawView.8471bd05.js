import{L as h}from"./index.esm.39df617e.js";/* empty css                                                       */import{e as w,o as m,c as p,n as _,r as k,a as P,d as b,t as z,x as D,F as L}from"../js/index.c2e56a80.js";const x={__name:"MapPolygonDraw",props:{zoom:{default:5},lat:{required:!0,default:49.29903},lng:{required:!0,default:19.949047},scrollwheel:{default:!0},disableDefaultUI:{default:!1},style:{default:"width: 100%; height: 500px;"},marker:{default:{title:"Hello!",image:"https://img.icons8.com/fluency/2x/google-maps-new.png",width:70,height:70}},color:{default:"#e8b54c"}},emits:["polygonCreated"],setup(g,{emit:a}){const e=g;let r="",t=null,i=null,d=null;return w(()=>{new h({apiKey:r,version:"weekly",libraries:["drawing","geometry"]}).load().then(()=>{i=new google.maps.Map(document.getElementById("gmap"),{center:{lat:e.lat,lng:e.lng},zoom:e.zoom,scrollwheel:e.scrollwheel,disableDefaultUI:e.disableDefaultUI}),d={url:e.marker.image,scaledSize:new google.maps.Size(e.marker.width,e.marker.height)},new google.maps.Marker({position:{lat:e.lat,lng:e.lng},title:e.marker.title,icon:d,map:i}),t=new google.maps.Data({map:i}),t.setControls(["Polygon"]),t.setDrawingMode("Polygon"),t.setStyle({editable:!0,draggable:!0,strokeColor:e.color,fillColor:e.color,strokeOpacity:.7,strokeWeight:2,fillOpacity:.5,zIndex:0}),t.addListener("addfeature",function(l){n(l),t.forEach(o=>{console.log(o,l.feature),o!=l.feature&&t.remove(o)})}),t.addListener("dragend",function(l){n(l)}),t.addListener("setgeometry",function(l){n(l)}),t.addListener("rightclick",function(l){t.remove(l.feature)});const n=l=>{let o={type:"Polygon",coordinates:[]},y=l.feature.getGeometry(),s=[],u=null;y.forEachLatLng(c=>{s.push([c.lng(),c.lat()])}),s.push(s[0]),o.coordinates.push(s),u=JSON.stringify(o),a("polygonCreated",u)}})}),(f,n)=>(m(),p("div",{id:"gmap",style:_(e.style)},null,4))}},v={__name:"MapPolygonDrawView",setup(g){let a=k(null);function e(r){a.value=r}return(r,t)=>(m(),p(L,null,[P(x,{onPolygonCreated:e,lat:49.299,lng:19.949,zoom:5},null,8,["lat","lng"]),b("p",null,"Polygon "+z(D(a)),1)],64))}};export{v as default};
